import{c as z,w as De}from"./utils-XaJTx1NJ.js";import{r as a,l}from"./chunk-XJI4KG32-C1vvKahF.js";import{B as E,c as K}from"./button-Duu1HsGS.js";import{C as pe,a as Fe,b as Me,c as $e}from"./card-yuThSpR1.js";import{D as Le,a as Pe,b as Oe,c as qe,d as Ke,e as Ve,f as Be,g as Ge,u as P,R as ze,P as He,O as Te,h as Ue,S as he,N as We,C as Xe}from"./contact-DvYE4V70.js";import{L as ee,I as ve,P as R}from"./label-kQHYT1OX.js";import{u as je,m as Je,r as Ye}from"./state-CNeEXuqY.js";import{S as Qe}from"./search-BufAfcK7.js";import{u as Ze}from"./useAuth-BYb9GMxF.js";import{X as ge}from"./x-BKQsG-gF.js";import"./index-BBHvn2k-.js";import"./createLucideIcon-BU21L8m8.js";function _e(e){const{addContact:n}=je(),[r,f]=a.useState(!1);function s(i){i.preventDefault();const c=new FormData(i.target),p=c.get("name"),v=c.get("phone"),u=c.get("group");n({name:p,phone:v,group:u}),f(!1)}return l.jsxs(Le,{open:r,onOpenChange:f,children:[" ",l.jsx(Pe,{asChild:!0,children:e.children||l.jsx("h1",{children:"no childrens"})}),l.jsxs(Oe,{onOpenAutoFocus:i=>i.preventDefault(),className:"sm:max-w-[425px]",children:[l.jsxs(qe,{children:[l.jsx(Ke,{children:"Add New Contact"}),l.jsx(Ve,{children:"Enter the details for the new contact below. Click save when done."})]}),l.jsxs("form",{onSubmit:s,children:[l.jsxs("div",{className:"grid gap-4 py-4",children:[l.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[l.jsx(ee,{htmlFor:"name-static",className:"text-right",children:"Name"}),l.jsx(ve,{"aria-autocomplete":"none",required:!0,minLength:1,name:"name",className:"col-span-3",placeholder:"e.g., John Doe"})]}),l.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[l.jsx(ee,{htmlFor:"phone-static",className:"text-right",children:" Phone "}),l.jsx(ve,{"aria-autocomplete":"none",required:!0,minLength:1,name:"phone",className:"col-span-3",placeholder:"e.g., 555-1234",type:"tel"}),l.jsx(ee,{className:"text-right",children:" Group "}),l.jsx("select",{name:"group",className:" col-span-3 p-1 rounded-base border-2 bg-white",children:Je.map(i=>l.jsx("option",{children:i}))})]})]}),l.jsxs(Be,{children:[l.jsx(Ge,{asChild:!0,children:l.jsx(E,{type:"button",children:" Cancel "})}),l.jsx(E,{type:"submit",children:"Save"})]})]})]})]})}var xe=1,et=.9,tt=.8,rt=.17,te=.1,re=.999,lt=.9999,nt=.99,at=/[\\\/_+.#"@\[\(\{&]/,st=/[\\\/_+.#"@\[\(\{&]/g,ot=/[\s-]/,ye=/[\s-]/g;function ne(e,n,r,f,s,i,c){if(i===n.length)return s===e.length?xe:nt;var p=`${s},${i}`;if(c[p]!==void 0)return c[p];for(var v=f.charAt(i),u=r.indexOf(v,s),g=0,d,b,y,S;u>=0;)d=ne(e,n,r,f,u+1,i+1,c),d>g&&(u===s?d*=xe:at.test(e.charAt(u-1))?(d*=tt,y=e.slice(s,u-1).match(st),y&&s>0&&(d*=Math.pow(re,y.length))):ot.test(e.charAt(u-1))?(d*=et,S=e.slice(s,u-1).match(ye),S&&s>0&&(d*=Math.pow(re,S.length))):(d*=rt,s>0&&(d*=Math.pow(re,u-s))),e.charAt(u)!==n.charAt(i)&&(d*=lt)),(d<te&&r.charAt(u-1)===f.charAt(i+1)||f.charAt(i+1)===f.charAt(i)&&r.charAt(u-1)!==f.charAt(i))&&(b=ne(e,n,r,f,u+1,i+2,c),b*te>d&&(d=b*te)),d>g&&(g=d),u=r.indexOf(v,u+1);return c[p]=g,g}function be(e){return e.toLowerCase().replace(ye," ")}function it(e,n,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ne(e,n,be(e),be(n),0,0,{})}var q='[cmdk-group=""]',le='[cmdk-group-items=""]',ct='[cmdk-group-heading=""]',Ce='[cmdk-item=""]',we=`${Ce}:not([aria-disabled="true"])`,ae="cmdk-item-select",$="data-value",ut=(e,n,r)=>it(e,n,r),Ne=a.createContext(void 0),V=()=>a.useContext(Ne),ke=a.createContext(void 0),se=()=>a.useContext(ke),Se=a.createContext(void 0),Ee=a.forwardRef((e,n)=>{let r=L(()=>{var t,m;return{search:"",value:(m=(t=e.value)!=null?t:e.defaultValue)!=null?m:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),f=L(()=>new Set),s=L(()=>new Map),i=L(()=>new Map),c=L(()=>new Set),p=Re(e),{label:v,children:u,value:g,onValueChange:d,filter:b,shouldFilter:y,loop:S,disablePointerSelection:T=!1,vimBindings:A=!0,...B}=e,U=P(),oe=P(),W=P(),D=a.useRef(null),j=jt();F(()=>{if(g!==void 0){let t=g.trim();r.current.value=t,N.emit()}},[g]),F(()=>{j(6,ce)},[]);let N=a.useMemo(()=>({subscribe:t=>(c.current.add(t),()=>c.current.delete(t)),snapshot:()=>r.current,setState:(t,m,h)=>{var o,x,w,k;if(!Object.is(r.current[t],m)){if(r.current[t]=m,t==="search")Q(),J(),j(1,Y);else if(t==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let C=document.getElementById(W);C?C.focus():(o=document.getElementById(U))==null||o.focus()}if(j(7,()=>{var C;r.current.selectedItemId=(C=M())==null?void 0:C.id,N.emit()}),h||j(5,ce),((x=p.current)==null?void 0:x.value)!==void 0){let C=m??"";(k=(w=p.current).onValueChange)==null||k.call(w,C);return}}N.emit()}},emit:()=>{c.current.forEach(t=>t())}}),[]),X=a.useMemo(()=>({value:(t,m,h)=>{var o;m!==((o=i.current.get(t))==null?void 0:o.value)&&(i.current.set(t,{value:m,keywords:h}),r.current.filtered.items.set(t,ie(m,h)),j(2,()=>{J(),N.emit()}))},item:(t,m)=>(f.current.add(t),m&&(s.current.has(m)?s.current.get(m).add(t):s.current.set(m,new Set([t]))),j(3,()=>{Q(),J(),r.current.value||Y(),N.emit()}),()=>{i.current.delete(t),f.current.delete(t),r.current.filtered.items.delete(t);let h=M();j(4,()=>{Q(),(h==null?void 0:h.getAttribute("id"))===t&&Y(),N.emit()})}),group:t=>(s.current.has(t)||s.current.set(t,new Set),()=>{i.current.delete(t),s.current.delete(t)}),filter:()=>p.current.shouldFilter,label:v||e["aria-label"],getDisablePointerSelection:()=>p.current.disablePointerSelection,listId:U,inputId:W,labelId:oe,listInnerRef:D}),[]);function ie(t,m){var h,o;let x=(o=(h=p.current)==null?void 0:h.filter)!=null?o:ut;return t?x(t,r.current.search,m):0}function J(){if(!r.current.search||p.current.shouldFilter===!1)return;let t=r.current.filtered.items,m=[];r.current.filtered.groups.forEach(o=>{let x=s.current.get(o),w=0;x.forEach(k=>{let C=t.get(k);w=Math.max(C,w)}),m.push([o,w])});let h=D.current;O().sort((o,x)=>{var w,k;let C=o.getAttribute("id"),G=x.getAttribute("id");return((w=t.get(G))!=null?w:0)-((k=t.get(C))!=null?k:0)}).forEach(o=>{let x=o.closest(le);x?x.appendChild(o.parentElement===x?o:o.closest(`${le} > *`)):h.appendChild(o.parentElement===h?o:o.closest(`${le} > *`))}),m.sort((o,x)=>x[1]-o[1]).forEach(o=>{var x;let w=(x=D.current)==null?void 0:x.querySelector(`${q}[${$}="${encodeURIComponent(o[0])}"]`);w==null||w.parentElement.appendChild(w)})}function Y(){let t=O().find(h=>h.getAttribute("aria-disabled")!=="true"),m=t==null?void 0:t.getAttribute($);N.setState("value",m||void 0)}function Q(){var t,m,h,o;if(!r.current.search||p.current.shouldFilter===!1){r.current.filtered.count=f.current.size;return}r.current.filtered.groups=new Set;let x=0;for(let w of f.current){let k=(m=(t=i.current.get(w))==null?void 0:t.value)!=null?m:"",C=(o=(h=i.current.get(w))==null?void 0:h.keywords)!=null?o:[],G=ie(k,C);r.current.filtered.items.set(w,G),G>0&&x++}for(let[w,k]of s.current)for(let C of k)if(r.current.filtered.items.get(C)>0){r.current.filtered.groups.add(w);break}r.current.filtered.count=x}function ce(){var t,m,h;let o=M();o&&(((t=o.parentElement)==null?void 0:t.firstChild)===o&&((h=(m=o.closest(q))==null?void 0:m.querySelector(ct))==null||h.scrollIntoView({block:"nearest"})),o.scrollIntoView({block:"nearest"}))}function M(){var t;return(t=D.current)==null?void 0:t.querySelector(`${Ce}[aria-selected="true"]`)}function O(){var t;return Array.from(((t=D.current)==null?void 0:t.querySelectorAll(we))||[])}function Z(t){let m=O()[t];m&&N.setState("value",m.getAttribute($))}function _(t){var m;let h=M(),o=O(),x=o.findIndex(k=>k===h),w=o[x+t];(m=p.current)!=null&&m.loop&&(w=x+t<0?o[o.length-1]:x+t===o.length?o[0]:o[x+t]),w&&N.setState("value",w.getAttribute($))}function ue(t){let m=M(),h=m==null?void 0:m.closest(q),o;for(;h&&!o;)h=t>0?bt(h,q):wt(h,q),o=h==null?void 0:h.querySelector(we);o?N.setState("value",o.getAttribute($)):_(t)}let de=()=>Z(O().length-1),me=t=>{t.preventDefault(),t.metaKey?de():t.altKey?ue(1):_(1)},fe=t=>{t.preventDefault(),t.metaKey?Z(0):t.altKey?ue(-1):_(-1)};return a.createElement(R.div,{ref:n,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:t=>{var m;(m=B.onKeyDown)==null||m.call(B,t);let h=t.nativeEvent.isComposing||t.keyCode===229;if(!(t.defaultPrevented||h))switch(t.key){case"n":case"j":{A&&t.ctrlKey&&me(t);break}case"ArrowDown":{me(t);break}case"p":case"k":{A&&t.ctrlKey&&fe(t);break}case"ArrowUp":{fe(t);break}case"Home":{t.preventDefault(),Z(0);break}case"End":{t.preventDefault(),de();break}case"Enter":{t.preventDefault();let o=M();if(o){let x=new Event(ae);o.dispatchEvent(x)}}}}},a.createElement("label",{"cmdk-label":"",htmlFor:X.inputId,id:X.labelId,style:Ct},v),H(e,t=>a.createElement(ke.Provider,{value:N},a.createElement(Ne.Provider,{value:X},t))))}),dt=a.forwardRef((e,n)=>{var r,f;let s=P(),i=a.useRef(null),c=a.useContext(Se),p=V(),v=Re(e),u=(f=(r=v.current)==null?void 0:r.forceMount)!=null?f:c==null?void 0:c.forceMount;F(()=>{if(!u)return p.item(s,c==null?void 0:c.id)},[u]);let g=Ae(s,i,[e.value,e.children,i],e.keywords),d=se(),b=I(j=>j.value&&j.value===g.current),y=I(j=>u||p.filter()===!1?!0:j.search?j.filtered.items.get(s)>0:!0);a.useEffect(()=>{let j=i.current;if(!(!j||e.disabled))return j.addEventListener(ae,S),()=>j.removeEventListener(ae,S)},[y,e.onSelect,e.disabled]);function S(){var j,N;T(),(N=(j=v.current).onSelect)==null||N.call(j,g.current)}function T(){d.setState("value",g.current,!0)}if(!y)return null;let{disabled:A,value:B,onSelect:U,forceMount:oe,keywords:W,...D}=e;return a.createElement(R.div,{ref:K(i,n),...D,id:s,"cmdk-item":"",role:"option","aria-disabled":!!A,"aria-selected":!!b,"data-disabled":!!A,"data-selected":!!b,onPointerMove:A||p.getDisablePointerSelection()?void 0:T,onClick:A?void 0:S},e.children)}),mt=a.forwardRef((e,n)=>{let{heading:r,children:f,forceMount:s,...i}=e,c=P(),p=a.useRef(null),v=a.useRef(null),u=P(),g=V(),d=I(y=>s||g.filter()===!1?!0:y.search?y.filtered.groups.has(c):!0);F(()=>g.group(c),[]),Ae(c,p,[e.value,e.heading,v]);let b=a.useMemo(()=>({id:c,forceMount:s}),[s]);return a.createElement(R.div,{ref:K(p,n),...i,"cmdk-group":"",role:"presentation",hidden:d?void 0:!0},r&&a.createElement("div",{ref:v,"cmdk-group-heading":"","aria-hidden":!0,id:u},r),H(e,y=>a.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?u:void 0},a.createElement(Se.Provider,{value:b},y))))}),ft=a.forwardRef((e,n)=>{let{alwaysRender:r,...f}=e,s=a.useRef(null),i=I(c=>!c.search);return!r&&!i?null:a.createElement(R.div,{ref:K(s,n),...f,"cmdk-separator":"",role:"separator"})}),pt=a.forwardRef((e,n)=>{let{onValueChange:r,...f}=e,s=e.value!=null,i=se(),c=I(u=>u.search),p=I(u=>u.selectedItemId),v=V();return a.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),a.createElement(R.input,{ref:n,...f,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":v.listId,"aria-labelledby":v.labelId,"aria-activedescendant":p,id:v.inputId,type:"text",value:s?e.value:c,onChange:u=>{s||i.setState("search",u.target.value),r==null||r(u.target.value)}})}),ht=a.forwardRef((e,n)=>{let{children:r,label:f="Suggestions",...s}=e,i=a.useRef(null),c=a.useRef(null),p=I(u=>u.selectedItemId),v=V();return a.useEffect(()=>{if(c.current&&i.current){let u=c.current,g=i.current,d,b=new ResizeObserver(()=>{d=requestAnimationFrame(()=>{let y=u.offsetHeight;g.style.setProperty("--cmdk-list-height",y.toFixed(1)+"px")})});return b.observe(u),()=>{cancelAnimationFrame(d),b.unobserve(u)}}},[]),a.createElement(R.div,{ref:K(i,n),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":p,"aria-label":f,id:v.listId},H(e,u=>a.createElement("div",{ref:K(c,v.listInnerRef),"cmdk-list-sizer":""},u)))}),vt=a.forwardRef((e,n)=>{let{open:r,onOpenChange:f,overlayClassName:s,contentClassName:i,container:c,...p}=e;return a.createElement(ze,{open:r,onOpenChange:f},a.createElement(He,{container:c},a.createElement(Te,{"cmdk-overlay":"",className:s}),a.createElement(Ue,{"aria-label":e.label,"cmdk-dialog":"",className:i},a.createElement(Ee,{ref:n,...p}))))}),gt=a.forwardRef((e,n)=>I(r=>r.filtered.count===0)?a.createElement(R.div,{ref:n,...e,"cmdk-empty":"",role:"presentation"}):null),xt=a.forwardRef((e,n)=>{let{progress:r,children:f,label:s="Loading...",...i}=e;return a.createElement(R.div,{ref:n,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},H(e,c=>a.createElement("div",{"aria-hidden":!0},c)))}),Ie=Object.assign(Ee,{List:ht,Item:dt,Input:pt,Group:mt,Separator:ft,Dialog:vt,Empty:gt,Loading:xt});function bt(e,n){let r=e.nextElementSibling;for(;r;){if(r.matches(n))return r;r=r.nextElementSibling}}function wt(e,n){let r=e.previousElementSibling;for(;r;){if(r.matches(n))return r;r=r.previousElementSibling}}function Re(e){let n=a.useRef(e);return F(()=>{n.current=e}),n}var F=typeof window>"u"?a.useEffect:a.useLayoutEffect;function L(e){let n=a.useRef();return n.current===void 0&&(n.current=e()),n}function I(e){let n=se(),r=()=>e(n.snapshot());return a.useSyncExternalStore(n.subscribe,r,r)}function Ae(e,n,r,f=[]){let s=a.useRef(),i=V();return F(()=>{var c;let p=(()=>{var u;for(let g of r){if(typeof g=="string")return g.trim();if(typeof g=="object"&&"current"in g)return g.current?(u=g.current.textContent)==null?void 0:u.trim():s.current}})(),v=f.map(u=>u.trim());i.value(e,p,v),(c=n.current)==null||c.setAttribute($,p),s.current=p}),s}var jt=()=>{let[e,n]=a.useState(),r=L(()=>new Map);return F(()=>{r.current.forEach(f=>f()),r.current=new Map},[e]),(f,s)=>{r.current.set(f,s),n({})}};function yt(e){let n=e.type;return typeof n=="function"?n(e.props):"render"in n?n.render(e.props):e}function H({asChild:e,children:n},r){return e&&a.isValidElement(n)?a.cloneElement(yt(n),{ref:n.ref},r(n.props.children)):r(n)}var Ct={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Nt({className:e,...n}){return l.jsx(Ie,{"data-slot":"command",className:z("flex h-full w-full flex-col overflow-hidden rounded-[0px] border-2 border-border bg-main font-base text-main-foreground",e),...n})}function kt({className:e,...n}){return l.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 gap-2 items-center border-b-2 border-border px-3",children:[l.jsx(Qe,{className:"size-4 shrink-0"}),l.jsx(Ie.Input,{"data-slot":"command-input",className:z("flex h-10 w-full rounded-base bg-transparent py-3 text-sm outline-hidden placeholder:text-main-foreground placeholder:opacity-50 disabled:cursor-not-allowed disabled:opacity-50",e),...n})]})}function qt({}){return[{title:"New React Router App"},{name:"description",content:"Welcome to React Router!"}]}const Kt=De(function(){if(!Ze())return null;const{contacts:r,groups:f}=je(),[s,i]=a.useState(""),[c,p]=a.useState(""),[v,u]=a.useState(!1),g=a.useMemo(()=>{let d=r.filter(Boolean).toSorted((b,y)=>b.name.localeCompare(y.name));return d=d.filter(b=>b.name.toLowerCase().includes(s.toLowerCase())||b.phone.includes(s)),c&&(d=d.filter(b=>b.group==c)),v&&(d=d.filter(b=>b.isFavorite)),d},[r,s,c,v]);return l.jsx("div",{className:"min-h-screen bg-gray-50/50",children:l.jsxs("div",{className:"container mx-auto px-4 py-8",children:[l.jsx("h1",{className:"text-4xl font-black text-center mb-8",children:"Phone Book"}),l.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[l.jsx("div",{className:"col-span-12 lg:col-span-3",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsxs(pe,{className:"py-10 bg-amber-200",children:[l.jsx(Fe,{children:l.jsx(Me,{className:"text-xl font-bold",children:"Filters"})}),l.jsx($e,{children:l.jsxs("div",{className:"flex flex-col gap-2",children:[l.jsxs(E,{variant:"neutral",onClick:()=>{u(!v)},className:z("flex items-center gap-2 px-4 py-2",v&&"bg-amber-100 hover:bg-amber-200"),children:[l.jsx(he,{className:z("h-5 w-5",v?"fill-amber-400 text-amber-400":"text-gray-400")}),l.jsx("span",{children:"Show only Favorites"})]}),l.jsx("h4",{className:"text-lg font-bold py-2",children:"Groups"}),f.map((d,b)=>l.jsx(E,{variant:"neutral",className:`w-full py-4 justify-start text-left font-medium transition-colors ${c===d?"bg-amber-100 hover:bg-amber-200":"hover:bg-gray-100"}`,onClick:()=>{p(d===c?"":d)},children:d},b))]})})]}),l.jsxs("div",{className:"flex flex-col gap-3",children:[l.jsx(_e,{children:l.jsx(E,{className:"w-full py-3 bg-orange-100 hover:bg-orange-200",children:"Add Contact"})}),l.jsx(We,{message:"Are you sure you want to reset all contacts?",onOk:()=>Ye(),children:l.jsx(E,{className:"w-full py-3 bg-amber-50 hover:bg-amber-100",children:"Reset Contacts"})})]})]})}),l.jsx("div",{className:"col-span-12 lg:col-span-9",children:l.jsxs("div",{className:"flex flex-col gap-4",children:[l.jsx("div",{className:"flex gap-4 items-center",children:l.jsx(Nt,{className:"p-3 flex-1",children:l.jsx(kt,{className:"placeholder-black",onValueChange:d=>i(d),placeholder:"Search contacts..."})})}),(v||c)&&l.jsxs("div",{className:"flex items-center gap-2 px-2",children:[v&&l.jsxs("div",{className:"bg-amber-100 px-3 py-1 rounded-full flex items-center gap-2",children:[l.jsx(he,{className:"h-4 w-4 fill-amber-400 text-amber-400"}),l.jsx("span",{className:"font-medium",children:"Showing favorites"}),l.jsx(E,{variant:"neutral",size:"icon",className:"h-5 w-5 rounded-full hover:bg-amber-200",onClick:()=>u(!1),children:l.jsx(ge,{className:"h-3 w-3"})})]}),c&&l.jsxs("div",{className:"bg-amber-100 px-3 py-1 rounded-full flex items-center gap-2",children:[l.jsx("span",{className:"font-medium",children:c}),l.jsx(E,{variant:"neutral",size:"icon",className:"h-5 w-5 rounded-full hover:bg-amber-200",onClick:()=>p(""),children:l.jsx(ge,{className:"h-3 w-3"})})]})]}),l.jsxs(pe,{className:"overflow-y-auto lg:max-h-[calc(100vh-16rem)] my-scroll py-0 more-shadow overflow-x-hidden flex flex-col gap-0 bg-white lg:p-3",children:[g.length===0&&l.jsx("div",{className:"text-center p-8 text-gray-500",children:"No contacts found"}),g.map((d,b)=>l.jsx(Xe,{...d,className:b%2!==0?"bg-amber-50":""},d.id))]})]})})]})]})})});export{Kt as default,qt as meta};
